let framerate=60,starMod=.7,flightSpeed=7,warpSpeed=40,postWarpSpeed=20,canvas=document.getElementById("canvas"),context=canvas.getContext("2d"),width=canvas.width=window.innerWidth,height=canvas.height=window.innerWidth,numberOfStars=width*height/1e4*starMod,xDirection=width/2,yDirection=height/2,warp=!1,leaveHyperSpace,stars=[];for(let i=0;i<numberOfStars;i++)stars[i]={x:field(0,width),y:field(0,height),size:field(0,1)};function centerView(){xDirection=width/2,yDirection=height/2}function flyAround(event){xDirection=event.offsetX,yDirection=event.offsetY}function controlsLock(){warp?(canvas.removeEventListener("mousemove",flyAround),flightSpeed=warpSpeed):(postWarp(),canvas.addEventListener("mousemove",flyAround),clear())}function postWarp(){flightspeed=postWarpSpeed,leaveHyperSpace=window.setInterval(slowDown,500)}function slowDown(){flightSpeed>10?flightSpeed-=1:cruisingSpeed()}function cruisingSpeed(){clearInterval(leaveHyperSpace)}function field(start,end){return 2*Math.random()*(end-start)+start}function clear(){context.clearRect(0,0,width,height)}function tick(){let lastX=0,lastY=0;warp||clear();for(let i=0;i<stars.length;i++)lastX=stars[i].x,lastY=stars[i].y,stars[i].x+=(stars[i].x-xDirection)*stars[i].size*(flightSpeed/1e3),stars[i].y+=(stars[i].y-yDirection)*stars[i].size*(flightSpeed/1e3),stars[i].size+=flightSpeed/1e3,(stars[i].x<0||stars[i].x>width||stars[i].y<0||stars[i].y>height)&&(stars[i]={x:field(0,width),y:field(0,height),size:0}),context.strokeStyle=warp?i%3==0?`rgba(200, 200, 255, ${Math.min(stars[i].size,1)})`:i%5==0?`rgba(230, 220, 255, ${Math.min(stars[i].size,1)})`:`rgba(255, 255, 255, ${Math.min(stars[i].size,1)})`:i%7==0?`rgba(255, 192, 203, ${Math.min(stars[i].size,1)})`:i%6==0?`rgba(173, 216, 230, ${Math.min(stars[i].size,1)})`:i%10==0?`rgba(255, 130, 140, ${Math.min(stars[i].size,1)})`:`rgba(255, 255, 255, ${Math.min(stars[i].size,1)})`,context.lineWidth=stars[i].size,context.lineCap="round",context.beginPath(),context.moveTo(lastX,lastY),context.lineTo(stars[i].x,stars[i].y),context.stroke()}canvas.addEventListener("mousemove",flyAround),document.getElementById("warp").addEventListener("mouseover",centerView),window.setInterval(tick,Math.floor(1e3/framerate)),document.getElementById("warp").addEventListener("click",e=>{warp=!warp,controlsLock()}),document.getElementById("slow").addEventListener("click",e=>{flightSpeed=5});